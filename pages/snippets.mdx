---
type: page
title: Snippets
date: 2023-08-22
---

## Access AppDelegate from SwiftUI App

```swift copy showLineNumbers
@main
struct IceCubesApp: App {
  @UIApplicationDelegateAdaptor private var appDelegate: AppDelegatern
}

class AppDelegate: NSObject, UIApplicationDelegate {
  func application(_: UIApplication,
                   didFinishLaunchingWithOptions _: [UIApplication.LaunchOptionsKey: Any]? = nil) -> Bool
  {
    print("Application did finish lauching")
  }
}
```

## Programmatic navigation with NavigationStack

```swift copy showLineNumbers
public enum RouterDestination: Hashable {
  case accountDetail(id: String)
}

@MainActor
extension View {
  func withAppRouter() -> some View {
    navigationDestination(for: RouterDestination.self) { destination in
      switch destination {
      case let .accountDetail(id):
        AccountDetailView(accountId: id)
      }
    }
  }
}

@MainActor
public class RouterPath: ObservableObject {
  @Published public var path: [RouterDestination] = []

  public func navigate(to: RouterDestination) {
    path.append(to)
  }
}


struct NotificationsTab: View {
  @StateObject private var routerPath = RouterPath()

  var body: some View {
    NavigationStack(path: $routerPath.path) {
        Button("Navigate to account") {
          routerPath.navigate(to: .accountDetail(id: accountId))
        }
        .withAppRouter()
    }
  }
}
```

[X Thread](https://twitter.com/Dimillian/status/1682037532895354880)

## Sheet with visual effect / blurred background and corner radius

```swift copy showLineNumbers
public struct AppAccountsSelectorView: View {
  @State private var isPresented: Bool = false

  public var body: some View {
    Button {
      isPresented.toggle()
    } label: {
      Text("Present sheet")
    }
    .sheet(isPresented: $isPresented, content: {
      accountsView
      .presentationDetents([.height(preferredHeight), .large])
      .presentationBackground(.thinMaterial)
      .presentationCornerRadius(16)
    })
  }
}
```

## Save array of Codable in @AppStorage

```swift copy showLineNumbers
extension Array: RawRepresentable where Element: Codable {
  public init?(rawValue: String) {
    guard let data = rawValue.data(using: .utf8),
          let result = try? JSONDecoder().decode([Element].self, from: data)
    else {
      return nil
    }
    self = result
  }

  public var rawValue: String {
    guard let data = try? JSONEncoder().encode(self),
          let result = String(data: data, encoding: .utf8)
    else {
      return "[]"
    }
    return result
  }
}
```
